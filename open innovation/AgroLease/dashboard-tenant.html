<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tenant Dashboard | AgroLease</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .hidden-tab {
            display: none;
        }
    </style>
</head>

<body class="flex flex-col min-h-screen"
    style="background-image: url('images/rice-bg.png'); background-size: cover; background-position: center; background-attachment: fixed;">

    <nav class="bg-green-700 text-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between h-16 items-center">
            <div class="flex items-center">
                <span class="mr-2 cursor-pointer" onclick="window.location.href='index.html'">
                    <svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </span>
                <span class="text-xl font-bold tracking-wide">AgroLease <span class="text-green-300 font-normal">|
                        Farmer</span></span>
            </div>
            <div class="flex items-center space-x-4">
                <span id="user-greeting" class="font-medium text-sm hidden sm:block"></span>
                <button id="logout-btn"
                    class="text-red-300 hover:text-white font-medium text-sm px-3 py-1 border border-red-400 hover:border-white rounded transition">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Sub Navigation for Dashboard -->
    <div class="bg-white border-b shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex space-x-8 overflow-x-auto">
            <button onclick="switchTab('my-requests')" id="tab-my-requests"
                class="text-green-700 border-b-2 border-green-700 py-4 px-2 font-medium text-sm sm:text-base whitespace-nowrap">My
                Requests</button>
            <button onclick="switchTab('invitations')" id="tab-invitations"
                class="text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300 py-4 px-2 font-medium text-sm sm:text-base whitespace-nowrap flex items-center relative">
                Landowner Inivitations
            </button>
            <a href="browse-lands.html"
                class="text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300 py-4 px-2 font-medium text-sm sm:text-base whitespace-nowrap flex items-center">
                Find Lands
                <svg class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </a>
            <button onclick="switchTab('machinery')" id="tab-machinery"
                class="text-blue-600 hover:text-blue-800 border-b-2 border-transparent hover:border-blue-300 py-4 px-3 font-medium text-sm sm:text-base whitespace-nowrap flex items-center ml-auto bg-blue-50 rounded-t-lg">
                <svg class="h-5 w-5 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Rent Machinery <span
                    class="ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full font-bold uppercase">New</span>
            </button>
        </div>
    </div>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- Tab: My Requests -->
        <div id="content-my-requests" class="space-y-6">
            <div
                class="flex justify-between items-center bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-100">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">My Lease Requests</h2>
                    <p class="text-gray-500 text-sm mt-1">Status of lands you have requested to lease.</p>
                </div>
                <button onclick="window.location.href='browse-lands.html'"
                    class="bg-green-600 hover:bg-green-700 text-white px-5 py-2.5 rounded-lg font-medium shadow-sm transition">
                    Browse Lands
                </button>
            </div>

            <div id="requests-loading" class="text-center py-12 hidden">
                <div
                    class="loader mx-auto h-10 w-10 border-4 border-gray-200 border-t-green-600 rounded-full animate-spin">
                </div>
                <p class="mt-4 text-gray-500">Loading requests...</p>
            </div>

            <div id="requests-empty"
                class="text-center py-16 bg-white rounded-xl shadow-sm border border-gray-100 hidden">
                <svg class="h-16 w-16 text-gray-300 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <h3 class="text-lg font-medium text-gray-900">No requests sent yet</h3>
                <p class="mt-1 text-gray-500">Find suitable land and send a lease request to the landowner.</p>
                <button onclick="window.location.href='browse-lands.html'"
                    class="mt-6 text-green-600 font-medium hover:text-green-800">
                    Find Lands to Lease
                </button>
            </div>

            <div id="requests-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Data populated via JS -->
            </div>
        </div>

        <!-- Tab: Invitations -->
        <div id="content-invitations" class="hidden-tab space-y-6">
            <div
                class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl shadow-sm border border-green-100 flex items-start">
                <div class="bg-green-100 p-3 rounded-full mr-4">
                    <svg class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Invitations to Lease</h2>
                    <p class="text-gray-600 text-sm mt-1">Landowners who found your farming profile via our AI and
                        specifically invited you to lease their land.</p>
                </div>
            </div>

            <div id="invitations-loading" class="text-center py-12 hidden">
                <div
                    class="loader mx-auto h-10 w-10 border-4 border-gray-200 border-t-green-600 rounded-full animate-spin">
                </div>
                <p class="mt-4 text-gray-500">Checking invitations...</p>
            </div>

            <div id="invitations-empty"
                class="text-center py-16 bg-white rounded-xl shadow-sm border border-gray-100 hidden">
                <svg class="h-16 w-16 text-gray-300 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                </svg>
                <h3 class="text-lg font-medium text-gray-900">No invitations right now</h3>
                <p class="mt-1 text-gray-500">When landowners find your profile, their exclusive requests will appear
                    here.</p>
            </div>

            <div id="invitations-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Data populated via JS -->
            </div>
        </div>

        <!-- Tab: Machinery -->
        <div id="content-machinery" class="hidden-tab space-y-6">
            <div
                class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl shadow-sm border border-blue-100 flex items-start">
                <div class="bg-blue-100 p-3 rounded-full mr-4">
                    <svg class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Available Machinery for Rent</h2>
                    <p class="text-gray-600 text-sm mt-1">Boost your agricultural yield by renting advanced tractors,
                        harvesters, and irrigation tools directly from local peers.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Machine 1 -->
                <div class="bg-white border rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition">
                    <div class="h-48 w-full bg-gray-200">
                        <img src="images/tractor.png" alt="Tractor" class="w-full h-full object-cover">
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-gray-900 truncate">Mahindra 575 DI Tractor</h3>
                            <span
                                class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-semibold whitespace-nowrap">Available</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4 line-clamp-2">High-performance 45 HP tractor suitable for
                            deep plowing, tilling, and heavy transport. Includes cultivator attachment.</p>
                        <div class="flex justify-between items-center text-sm border-t pt-4">
                            <div>
                                <p class="text-gray-500 text-xs">Rental Rate</p>
                                <p class="font-bold text-blue-700 text-lg">₹800<span
                                        class="text-xs text-gray-500 font-normal">/day</span></p>
                            </div>
                            <button onclick="window.showToast('Request sent to equipment owner!', 'success')"
                                class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition">
                                Request Rental
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Machine 2 -->
                <div class="bg-white border rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition">
                    <div class="h-48 w-full bg-gray-200">
                        <img src="images/harvester.png" alt="Harvester" class="w-full h-full object-cover">
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-gray-900 truncate">Class Combine Harvester</h3>
                            <span
                                class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-semibold whitespace-nowrap">Available</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4 line-clamp-2">State-of-the-art combine harvester for wheat,
                            paddy, and soybeans. Excellent grain quality and low loss rate.</p>
                        <div class="flex justify-between items-center text-sm border-t pt-4">
                            <div>
                                <p class="text-gray-500 text-xs">Rental Rate</p>
                                <p class="font-bold text-blue-700 text-lg">₹2,500<span
                                        class="text-xs text-gray-500 font-normal">/day</span></p>
                            </div>
                            <button onclick="window.showToast('Request sent to equipment owner!', 'success')"
                                class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition">
                                Request Rental
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Machine 3 -->
                <div class="bg-white border rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition">
                    <div class="h-48 w-full bg-gray-200 border-b">
                        <img src="images/jcb.png" alt="JCB Backhoe Loader" class="w-full h-full object-cover">
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg text-gray-900 truncate">JCB 3DX Backhoe Loader</h3>
                            <span
                                class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-semibold whitespace-nowrap">In
                                Use</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4 line-clamp-2">Heavy-duty JCB earthmover ideal for land
                            leveling, digging ponds, trenching, and clearing large stumps.</p>
                        <div class="flex justify-between items-center text-sm border-t pt-4">
                            <div>
                                <p class="text-gray-500 text-xs">Rental Rate</p>
                                <p class="font-bold text-blue-700 text-lg">₹1,500<span
                                        class="text-xs text-gray-500 font-normal">/hour</span></p>
                            </div>
                            <button onclick="window.showToast('Added to waitlist!', 'info')"
                                class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition">
                                Join Waitlist
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/tenant.js"></script>
    <script>
        function switchTab(tab) {
            document.getElementById('content-my-requests').classList.add('hidden-tab');
            document.getElementById('content-invitations').classList.add('hidden-tab');
            document.getElementById('content-machinery').classList.add('hidden-tab');

            const normalClass = "text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300 py-4 px-2 font-medium text-sm sm:text-base whitespace-nowrap flex items-center relative";
            const machineryNormalClass = "text-blue-600 hover:text-blue-800 border-b-2 border-transparent hover:border-blue-300 py-4 px-3 font-medium text-sm sm:text-base whitespace-nowrap flex items-center ml-auto bg-blue-50 rounded-t-lg";

            document.getElementById('tab-my-requests').className = normalClass;
            document.getElementById('tab-invitations').className = normalClass;
            document.getElementById('tab-machinery').className = machineryNormalClass;

            document.getElementById(`content-${tab}`).classList.remove('hidden-tab');

            if (tab === 'machinery') {
                // The default class already looks "selected" enough, maybe just change border
                document.getElementById('tab-machinery').classList.add('border-blue-500');
            } else {
                document.getElementById(`tab-${tab}`).className = "text-green-700 border-b-2 border-green-700 py-4 px-2 font-medium text-sm sm:text-base whitespace-nowrap flex items-center relative";
            }
        }
    </script>
</body>

</html>